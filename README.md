# Финансовое приложение (C# / Console)

## Общая идея решения

Реализовано консольное приложение для управления личными финансами.  
Основной функционал:

- управление **счетами**, **категориями** и **операциями** (доходы/расходы);
- **анализ финансов** за выбранный период;
- **импорт / экспорт данных** в различных форматах (CSV / JSON / YAML);
- **отмена операций (Undo)** через паттерн **Команда + Хранитель состояний**;
- **проверка безопасности и валидации** через **Цепочку ответственности**;
- уведомления между сервисами через **Наблюдатель (EventBus)**;
- интерфейс на базе **консольного меню**, построенного через **Фасады** и **DI-контейнер**.

---

## Основные модули проекта

| Модуль            | Назначение |
|-------------------|-------------|
| **Domain**        | Базовые сущности (`BankAccount`, `Category`, `Operation`) |
| **Repositories**  | Хранение данных (in-memory) |
| **Services**      | Логика домена (операции, аналитика, категории, счета) |
| **Facades**       | Упрощённый доступ к функционалу для UI |
| **IO**            | Импорт и экспорт данных (`Csv`, `Json`, `Yaml`) |
| **Commands**      | Выполнение и откат операций |
| **Domain/Events** | EventBus для уведомлений между компонентами |
| **UI**            | Консольное меню и команды пользователя |
| **Другое**        | DI-контейнер, настройка приложения |

---

## SOLID-принципы

| Принцип | Где реализован | Суть |
|-------|----------------|------|
| **S** | `AccountService`, `OperationService`, `AnalyticsService`, `ExportFacade`, `ImportFacade` | Каждый класс выполняет одну конкретную задачу |
| **O** | Новые экспортёры и импортёры (`Csv`, `Json`, `Yaml`) можно добавлять без изменения существующих фасадов | Расширение через новые классы |
| **L** | Все экспортёры и импортёры наследуют `DataExporter` / `DataImporter` | Поведение не нарушается при подстановке наследников |
| **I** | Интерфейсы `IAccountService`, `ICategoryService`, `IMenuItem` | Классы реализуют только нужные методы |
| **D** | Через **DI-контейнер** и внедрение зависимостей в фасады и UI | Модули верхнего уровня не зависят от конкретных реализаций |

---

## GRASP-принципы

| Принцип | Где применён | Суть |
|----------|---------------|------|
| **Controller** | Классы-фасады (`AccountFacade`, `OperationFacade`, `AnalyticsFacade`, `ImportFacade`, `ExportFacade`) | Управляют бизнес-сценариями |
| **Low Coupling / High Cohesion** | Чёткое разделение сервисов, фасадов и UI | Минимальные связи между компонентами |
| **Information Expert** | Каждый сервис работает с “своими” данными (`AccountService` — со счетами и т.д.) | Логика находится там, где информация |
| **Creator** | Репозитории создают объекты, которыми управляют | Ответственность за создание передана владельцам данных |
| **Polymorphism** | Экспортёры/импортёры реализуют общие базовые интерфейсы | Упрощён выбор поведения в рантайме |

---

## Применённые паттерны GoF

| Паттерн                     | Где реализован | Назначение                                                                                 |
|-----------------------------|----------------|--------------------------------------------------------------------------------------------|
| **Facade**                  | `AccountFacade`, `OperationFacade`, `AnalyticsFacade`, `ImportFacade`, `ExportFacade` | Объединяют несколько сервисов в один сценарий (например, “создать счёт и внести депозит”)  |
| **Command**                 | `CreateOperationCommand`, `CommandManager` | Выполнение операций с возможностью отката (Undo)                                           |
| **Memento**                 | `AccountMemento`, `AccountHistory` | Хранение и восстановление предыдущих состояний счёта                                       |
| **Observer**                | `EventBus`, `DomainEvent` | Уведомления о событиях (например, `OperationBlocked`, `DataImported`)                      |
| **Chain of Responsibility** | `ValidationHandler`, `SecurityHandler`, `LoggingHandler` | Проверка операций по цепочке (валидация → безопасность → логирование)                      |
| **Strategy и Visitor**      | `CsvExporter`, `JsonExporter`, `YamlExporter`, `CsvImporter`, `JsonImporter`, `YamlImporter` | Выбор подходящей стратегии импорта/экспорта по формату и экспорт данных при помощи Visitor |
| **Template Method**         | `DataExporter`, `DataImporter` | Общий шаблон шагов для всех экспортёров и импортёров                                       |
| **Iterator**                | Методы `GetAll()` в репозиториях | Перебор коллекций доменных объектов                                                        |
| **Decorator**               | `CommandTimerDecorator` | Расширение поведения команд (логирование времени выполнения)                               |
| **Factory Method**          | Внутри `ImportFacade`/`ExportFacade` — выбор нужного обработчика по расширению | Создание нужного обработчика по типу данных                                                |

---
